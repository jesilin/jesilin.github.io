<!DOCTYPE HTML>
<html lang="en-US" dir="ltr">
    <head>
        <meta charset="utf-8">
    </head>
    <body>
      <h1>I am at jesilin.github.io<h1>
      <h3>Cookie setting and getting</h3>
      <button onclick='setAndGetLocalStorage()'>Set and Get local storage</button><br />
      <p>Trying to set local storage with value:</p><pre id='lss'></pre>
      <p>get local storage :</p><pre id='lsg'></pre>

      <h3>document.requestStorageAccess</h3>
      <button onclick='requestSA()'>Call document.requestStorageAccess()</button><br />
      <p>Return value of requestStorageAccess():</p><pre id='request_storage_access'></pre><br />

      <h3>document.hasStorageAccess</h3>
      <button onclick='hasSA()'>Call document.hasStorageAccess()</button><br />
      <p>Return value of hasStorageAccess():</p><pre id='has_storage_access'></pre><br />

      <h3>window.open</h3>
      <button onclick='openWindow()'>Call window.open()</button><br />
      <p>Return value of Window.Open():</p><pre id='window_open'></pre><br />

      <script>
        function setAndGetLocalStorage() {
          // Try to set local storage
          var randVal = Math.random();
          var set = document.getElementById('lss');
          set.innerHTML = randVal;
          window.localStorage.setItem('foo', randVal);
          // Get local storage
          var get = document.getElementById('lsg');
          get.innerHTML = window.localStorage.getItem('foo');;
        }
        function requestSA() {
          var result = document.getElementById('request_storage_access');
          document.requestStorageAccess().then(
            () => {result.innerHTML = 'access granted'},
            () => {result.innerHTML = 'access denied'}
          );
        }
        function hasSA() {
          var result = document.getElementById('has_storage_access');
          document.hasStorageAccess().then(
            (hasAccess) => {result.innerHTML = hasAccess},
            (reason) => {result.innerHTML = 'promise rejected for reason' + reason}
          );
        }
        function openWindow() {
          window.open("https://jesilin.github.io/index.html");
        }
      </script>
    </body>
</html>
